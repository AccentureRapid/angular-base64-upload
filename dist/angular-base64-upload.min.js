/*! angular-base64-upload - v0.1.13
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> [January 20, 2016]
* Licensed MIT */

!function(a,b){"use strict";a._arrayBufferToBase64=function(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;e>f;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)};var c=a.angular.module("naif.base64",[]);c.directive("baseSixtyFourInput",["$window","$q",function(a,b){for(var c={onChange:"&",onAfterValidate:"&",parser:"&"},d=["onabort","onerror","onloadstart","onloadend","onprogress","onload"],e=d.length-1;e>=0;e--){var f=d[e];c[f]="&"}return{restrict:"A",require:"?ngModel",scope:c,link:function(c,e,f,g){function h(a,b,c,d,e){c[a]=function(a){b()(a,c,d,t,u,e)}}function i(d,e,g){return function(h){var i,j=h.target.result;g.base64=a._arrayBufferToBase64(j),i=f.parser?b.when(c.parser()(e,g)):b.when(g);var l=i.then(function(a){u.push(a),k()});v.push(l),f.onload&&c.onload()(h,d,e,t,u,g)}}function j(a,b,e){for(var g=d.length-1;g>=0;g--){var j=d[g];f[j]&&"onload"!==j&&h(j,c[j],a,b,e)}a.onload=i(a,b,e)}function k(){var a=f.multiple?u:u[0];g.$setViewValue(a),angular.isFunction(g.$validate)&&g.$validate();var b=angular.version.full.split(".");if("1"===b[0]&&"3"===b[1]&&parseInt(b[2])>=4){var c=g.$viewValue;q(c),r(c),o(c),p(c),s(c)}}function l(){for(var b=t.length-1;b>=0;b--){var c=new a.FileReader,d=t[b],e={};e.filetype=d.type,e.filename=d.name,e.filesize=d.size,j(c,d,e),c.readAsArrayBuffer(d)}}function m(a){f.onChange&&c.onChange()(a,t)}function n(a){f.onAfterValidate&&b.all(v).then(function(){c.onAfterValidate()(a,t)})}function o(a){if(f.maxnum&&f.multiple&&a){var b=a.length<=parseInt(f.maxnum);g.$setValidity("maxnum",b)}return a}function p(a){if(f.minnum&&f.multiple&&a){var b=a.length>=parseInt(f.minnum);g.$setValidity("minnum",b)}return a}function q(a){var b=!0;if(f.maxsize&&a){var c=1e3*parseFloat(f.maxsize);if(f.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize>c){b=!1;break}}else b=a.filesize<=c;g.$setValidity("maxsize",b)}return a}function r(a){var b=!0,c=1e3*parseFloat(f.minsize);if(f.minsize&&a){if(f.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize<c){b=!1;break}}else b=a.filesize>=c;g.$setValidity("minsize",b)}return a}function s(a){var b,c,d,e=!0;if(f.accept&&(c=f.accept.trim().replace(/[,\s]+/gi,"|").replace(/\./g,"\\.").replace(/\/\*/g,"/.*"),b=new RegExp(c)),f.accept&&a){if(f.multiple)for(var h=0;h<a.length;h++){var i=a[h];if(d="."+i.filename.split(".").pop(),e=b.test(i.filetype)||b.test(d),!e)break}else d="."+a.filename.split(".").pop(),e=b.test(a.filetype)||b.test(d);g.$setValidity("accept",e)}return a}if(g){g.$setViewValue(null),g.$setPristine();var t=[],u=[],v=[];e.on("change",function(a){a.target.files.length&&(v=[],v=angular.copy(v),u=[],u=angular.copy(u),t=a.target.files,l(),m(a),n(a))}),g.$parsers.push(o),g.$parsers.push(p),g.$parsers.push(q),g.$parsers.push(r),g.$parsers.push(s)}}}}])}(window);
//# sourceMappingURL=angular-base64-upload.min.js.map