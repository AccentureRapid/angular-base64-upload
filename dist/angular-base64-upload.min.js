/*! angular-base64-upload - v0.1.1
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> 2015;
* Licensed MIT */
!function(a){"use strict";function b(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;e>f;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)}var c=a.angular.module("naif.base64",[]);c.directive("baseSixtyFourInput",[function(){for(var c=["onabort","onerror","onloadstart","onloadend","onprogress","onload"],d=["maxsize","minsize","maxnum","minnum","required"],e={maxsize:!0,minsize:!0,maxnum:!0,minnum:!0,required:!1},f={onChange:"&"},g=c.length-1;g>=0;g--){var h=c[g];f[h]="&"}return{restrict:"A",require:"?ngModel",scope:f,link:function(f,g,h,i){function j(a,b,c,d){return function(e){a()(e,b,c,r,s,d)}}function k(a,c,d){return function(e){var g=b(e.target.result);d.base64=g,s.push(d),h.onload&&f.onload()(e,a,c,r,s,d),m()}}function l(a,b,d){for(var e=c.length-1;e>=0;e--){var g=c[e];h[g]&&"onload"!==g&&(a[g]=j(f[g],a,b,d))}a.onload=k(a,b,d)}function m(){f.$apply(function(){var a=h.multiple?s:s[0]||null;i.$setViewValue(angular.copy(a))})}function n(){for(var b=r.length-1;b>=0;b--){var c=new a.FileReader,d=r[b],e={};e.filetype=d.type,e.filename=d.name,e.filesize=d.size,l(c,d,e),c.readAsArrayBuffer(d)}}function o(a,b){h.onChange&&f.onChange()(a,b)}function p(a){f.$apply(function(){for(var b=d.length-1;b>=0;b--){var c=d[b];t[c]=a[c]||t[c]||e[c],i.$setValidity(c,t[c])}})}function q(){h.maxnum&&h.multiple&&r.length>parseInt(h.maxnum)&&p({maxnum:!1}),h.minnum&&h.multiple&&r.length<parseInt(h.minnum)&&p({minnum:!1});for(var a=r.length-1;a>=0;a--){var b=r[a];h.maxsize&&b.size>1e3*parseFloat(h.maxsize)&&p({maxsize:!1}),h.minsize&&b.size<1e3*parseFloat(h.minsize)&&p({minsize:!1})}}if(i){var r=[],s=[],t=e;g.on("change",function(a){g[0].files.length&&(s=[],r=g[0].files,o(a,r),p(e),q(),n())}),i.$validators.required=function(a,b){var c=a||b||[];return c.hasOwnProperty("length")?c.length>0:c?!0:!1}}}}}])}(this);