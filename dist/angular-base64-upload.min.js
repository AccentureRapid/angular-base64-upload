/*! angular-base64-upload - v0.1.9
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> 2015;
* Licensed MIT */

!function(a,b){"use strict";a._arrayBufferToBase64=function(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;e>f;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)};var c=a.angular.module("naif.base64",[]);c.directive("baseSixtyFourInput",["$window","$q","base64Converter",function(a,b,c){for(var d={onChange:"&",parser:"&"},e=["onabort","onerror","onloadstart","onloadend","onprogress","onload"],f=e.length-1;f>=0;f--){var g=e[f];d[g]="&"}return{restrict:"A",require:"?ngModel",scope:d,link:function(d,f,g,h){function i(a,b,c,d,e){c[a]=function(a){b()(a,c,d,s,t,e)}}function j(a,e,f){return function(h){var i,j=h.target.result;g.parser?i=b.when(d.parser()(e)):(f.base64=c.getBase64String(j),i=b.when(f)),i.then(function(a){t.push(a),l()}),g.onload&&d.onload()(h,a,e,s,t,f)}}function k(a,b,c){for(var f=e.length-1;f>=0;f--){var h=e[f];g[h]&&"onload"!==h&&i(h,d[h],a,b,c)}a.onload=j(a,b,c)}function l(){var a=g.multiple?t:t[0];h.$setViewValue(a),angular.isFunction(h.$validate)&&h.$validate();var b=angular.version.full.split(".");if("1"===b[0]&&"3"===b[1]&&parseInt(b[2])>=4){var c=h.$viewValue;q(c),r(c),o(c),p(c)}}function m(){for(var b=s.length-1;b>=0;b--){var c=new a.FileReader,d=s[b],e={};e.filetype=d.type,e.filename=d.name,e.filesize=d.size,k(c,d,e),c.readAsArrayBuffer(d)}}function n(a){g.onChange&&d.onChange()(a,s)}function o(a){if(g.maxnum&&g.multiple&&a){var b=a.length<=parseInt(g.maxnum);h.$setValidity("maxnum",b)}return a}function p(a){if(g.minnum&&g.multiple&&a){var b=a.length>=parseInt(g.minnum);h.$setValidity("minnum",b)}return a}function q(a){var b=!0;if(g.maxsize&&a){var c=1e3*parseFloat(g.maxsize);if(g.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize>c){b=!1;break}}else b=a.filesize<=c;h.$setValidity("maxsize",b)}return a}function r(a){var b=!0,c=1e3*parseFloat(g.minsize);if(g.minsize&&a){if(g.multiple)for(var d=0;d<a.length;d++){var e=a[d];if(e.filesize<c){b=!1;break}}else b=a.filesize>=c;h.$setValidity("minsize",b)}return a}if(h){h.$setViewValue(null);var s=[],t=[];f.on("change",function(a){a.target.files.length&&(t=[],t=angular.copy(t),s=a.target.files,m(),n(a))}),h.$parsers.push(o),h.$parsers.push(p),h.$parsers.push(q),h.$parsers.push(r)}}}}]),c.service("base64Converter",["$window","$q","$rootScope",function(a,b,c){this.getBase64String=function(b){return a._arrayBufferToBase64(b)},this.base64ToBlob=function(b,c){var d,e="data:"+c+";base64,"+b;d=a.atob(e.split(",")[1]);for(var f=e.split(",")[0].split(":")[1].split(";")[0],g=new Uint8Array(d.length),h=0;h<d.length;h++)g[h]=d.charCodeAt(h);return new Blob([g],{type:f})},this.getBase64Object=function(d){var e=this,f=b.defer(),g={filename:d.name,filetype:d.type,filesize:d.size,base64:null},h=new a.FileReader;return h.onload=function(a){g.base64=e.getBase64String(a.target.result),c.$apply(function(){f.resolve(g)})},h.readAsArrayBuffer(d),f.promise}}])}(window);
//# sourceMappingURL=angular-base64-upload.min.js.map