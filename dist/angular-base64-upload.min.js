/*! angular-base64-upload - v0.1.0
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> 2015;
* Licensed MIT */
!function(a){"use strict";function b(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;e>f;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)}var c=a.angular;c.module("naif.base64",[]).directive("baseSixtyFourInput",[function(){for(var d=["onabort","onerror","onloadstart","onloadend","onprogress"],e={},f=d.length-1;f>=0;f--){var g=d[f];e[g]="="}return{restrict:"A",require:"ngModel",scope:e,link:function(e,f,g,h){function i(a){return function(b){a(b,t,p,q,p[s])}}function j(){for(var a=d.length-1;a>=0;a--){var b=d[a];"function"==typeof e[b]&&(t[b]=i(e[b]))}t.onload=l}function k(){e.$apply(function(){var a=g.multiple?q:q[0]||[];h.$setViewValue(c.copy(a))})}function l(a){"function"==typeof e.onload&&e.onload(a,t,p,q,p[s]);var c=b(a.target.result);r.base64=c,q.push(r),s++,s<p.length?m():k()}function m(){var a=p[s];r={},r.filetype=a.type,r.filename=a.name,r.filesize=a.size,t.readAsArrayBuffer(a)}function n(a,b){e.$apply(function(){h.$setValidity(a,b)})}function o(){g.maxnum&&g.multiple&&p.length>parseInt(g.maxnum)&&n("maxnum",!1),g.minnum&&g.multiple&&p.length<parseInt(g.minnum)&&n("minnum",!1);for(var a=p.length-1;a>=0;a--){var b=p[a];g.maxsize&&b.size>1e3*parseFloat(g.maxsize)&&n("maxsize",!1),g.minsize&&b.size<1e3*parseFloat(g.minsize)&&n("minsize",!1)}m()}var p=[],q=[],r={},s=0,t=new a.FileReader;j(),f.on("change",function(){f[0].files.length&&(p=f[0].files,q=[],s=0,n("maxsize",!0),n("minsize",!0),n("maxnum",!0),n("minnum",!0),n("required",!1),o())}),h.$validators.required=function(a,b){var c=a||b||[];return c.hasOwnProperty("length")?c.length>0:c?!0:!1}}}}])}(this);