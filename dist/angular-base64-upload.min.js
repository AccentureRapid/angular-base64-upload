/*! angular-base64-upload - v0.1.0
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> 2015;
* Licensed MIT */
!function(a){"use strict";function b(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;e>f;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)}var c=a.angular.module("naif.base64",[]);c.directive("baseSixtyFourInput",[function(){for(var c=["onabort","onerror","onloadstart","onloadend","onprogress","onload"],d={},e=c.length-1;e>=0;e--){var f=c[e];d[f]="="}return{restrict:"A",require:"ngModel",scope:d,link:function(d,e,f,g){function h(a){return function(b){a(b,s,o,p,o[r])}}function i(){for(var a=c.length-1;a>=0;a--){var b=c[a];"function"==typeof d[b]&&"onload"!==b&&(s[b]=h(d[b]))}s.onload=k}function j(){d.$apply(function(){var a=f.multiple?p:p[0]||[];g.$setViewValue(angular.copy(a))})}function k(a){"function"==typeof d.onload&&d.onload(a,s,o,p,o[r]);var c=b(a.target.result);q.base64=c,p.push(q),r++,r<o.length&&l(),j()}function l(){var a=o[r];q={},q.filetype=a.type,q.filename=a.name,q.filesize=a.size,s.readAsArrayBuffer(a)}function m(a,b){d.$apply(function(){g.$setValidity(a,b)})}function n(){f.maxnum&&f.multiple&&o.length>parseInt(f.maxnum)&&m("maxnum",!1),f.minnum&&f.multiple&&o.length<parseInt(f.minnum)&&m("minnum",!1);for(var a=o.length-1;a>=0;a--){var b=o[a];f.maxsize&&b.size>1e3*parseFloat(f.maxsize)&&m("maxsize",!1),f.minsize&&b.size<1e3*parseFloat(f.minsize)&&m("minsize",!1)}}var o=[],p=[],q={},r=0,s=new a.FileReader;i(),e.on("change",function(){e[0].files.length&&(o=e[0].files,p=[],r=0,m("maxsize",!0),m("minsize",!0),m("maxnum",!0),m("minnum",!0),m("required",!1),n(),l())}),g.$validators.required=function(a,b){var c=a||b||[];return c.hasOwnProperty("length")?c.length>0:c?!0:!1}}}}])}(this);