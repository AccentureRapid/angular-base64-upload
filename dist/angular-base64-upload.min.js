/*! angular-base64-upload - v0.1.1
* https://github.com/adonespitogo/angular-base64-upload
* Copyright (c) Adones Pitogo <pitogo.adones@gmail.com> 2015;
* Licensed MIT */
!function(a){"use strict";function b(b){for(var c="",d=new Uint8Array(b),e=d.byteLength,f=0;e>f;f++)c+=String.fromCharCode(d[f]);return a.btoa(c)}var c=a.angular.module("naif.base64",[]);c.directive("baseSixtyFourInput",[function(){for(var c=["onabort","onerror","onloadstart","onloadend","onprogress","onload"],d=["maxsize","minsize","maxnum","minnum","required"],e={maxsize:!0,minsize:!0,maxnum:!0,minnum:!0,required:!1},f={},g=c.length-1;g>=0;g--){var h=c[g];f[h]="&"}return{restrict:"A",require:"?ngModel",scope:f,link:function(f,g,h,i){function j(a,b,c,d){return function(e){a()(e,b,c,q,r,d)}}function k(a,c,d){return function(e){var g=b(e.target.result);d.base64=g,r.push(d),h.onload&&f.onload()(e,a,c,q,r,d),m()}}function l(a,b,d){for(var e=c.length-1;e>=0;e--){var g=c[e];h[g]&&"onload"!==g&&(a[g]=j(f[g],a,b,d))}a.onload=k(a,b,d)}function m(){f.$apply(function(){var a=h.multiple?r:r[0]||null;i.$setViewValue(angular.copy(a))})}function n(){for(var b=q.length-1;b>=0;b--){var c=new a.FileReader,d=q[b],e={};e.filetype=d.type,e.filename=d.name,e.filesize=d.size,l(c,d,e),c.readAsArrayBuffer(d)}}function o(a){f.$apply(function(){for(var b=d.length-1;b>=0;b--){var c=d[b];s[c]=a[c]||s[c]||e[c],i.$setValidity(c,s[c])}})}function p(){h.maxnum&&h.multiple&&q.length>parseInt(h.maxnum)&&o({maxnum:!1}),h.minnum&&h.multiple&&q.length<parseInt(h.minnum)&&o({minnum:!1});for(var a=q.length-1;a>=0;a--){var b=q[a];h.maxsize&&b.size>1e3*parseFloat(h.maxsize)&&o({maxsize:!1}),h.minsize&&b.size<1e3*parseFloat(h.minsize)&&o({minsize:!1})}}if(i){var q=[],r=[],s=e;g.on("change",function(){g[0].files.length&&(q=g[0].files,r=[],o(e),p(),n())}),i.$validators.required=function(a,b){var c=a||b||[];return c.hasOwnProperty("length")?c.length>0:c?!0:!1}}}}}])}(this);